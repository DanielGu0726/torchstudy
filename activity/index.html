<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Activity â€“ TORCH</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .activity-card-news { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; }
    .act-card { background: var(--white); border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow); transition: transform .2s; }
    .act-card:hover { transform: translateY(-4px); }
    .act-card-img { width: 100%; height: 200px; object-fit: cover; background: var(--light); display: flex; align-items: center; justify-content: center; font-size: 3rem; }
    .act-card-img img { width: 100%; height: 100%; object-fit: cover; }
    .act-card-body { padding: 20px; }
    .act-card-date { font-size: .78rem; color: var(--text-muted); margin-bottom: 8px; }
    .act-card-title { font-size: 1rem; font-weight: 700; margin-bottom: 8px; }
    .act-card-desc { font-size: .85rem; color: var(--text-muted); }
  </style>
</head>
<body>
<nav class="navbar">
  <div class="nav-inner">
    <a href="../index.html" class="nav-logo"><div class="logo-icon">ğŸ”¥</div>TORCH</a>
    <div class="nav-links">
      <div class="nav-item"><a href="../index.html" class="nav-link">Home</a></div>
      <div class="nav-item"><a href="../about.html" class="nav-link">About</a></div>
      <div class="nav-item"><a href="index.html" class="nav-link active">Activity</a></div>
      <div class="nav-item"><span class="nav-link">Registration <svg viewBox="0 0 10 6" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M1 1l4 4 4-4"/></svg></span><div class="dropdown"><a href="../registration/study.html">Study Group</a><a href="../registration/symposium.html">Symposium</a><a href="../registration/workshop.html">Workshop</a></div></div>
      <div class="nav-item"><a href="../sponsor.html" class="nav-link">Sponsor</a></div>
      <div class="nav-item"><a href="../members/members.html" class="nav-link">Members</a></div>
      <div class="nav-item"><a href="../news/index.html" class="nav-link">News</a></div>
      <div class="nav-item"><a href="../contact.html" class="nav-link">Contact</a></div>
    </div>
    <div class="lang-toggle">
      <button class="lang-btn active" id="btn-ko" onclick="I18n.setLang('ko')">KOR</button>
      <button class="lang-btn" id="btn-en" onclick="I18n.setLang('en')">ENG</button>
    </div>
    <div class="hamburger"><span></span><span></span><span></span></div>
  </div>
</nav>
<div class="mobile-menu">
  <a href="../index.html" class="mobile-link">Home</a>
  <a href="../about.html" class="mobile-link">About</a>
  <a href="index.html" class="mobile-link">Activity</a>
  <a href="../registration/study.html" class="mobile-link" data-i18n="mobile.study">Study ì‹ ì²­</a>
  <a href="../contact.html" class="mobile-link">Contact</a>
  <a href="../members/members.html" class="mobile-link" data-i18n="mobile.members">Members ì†Œê°œ</a>
</div>

<div class="page-header">
  <div class="container">
    <span class="eyebrow">What We Do</span>
    <h1>Activity</h1>
    <p data-i18n="activity.header.p">ì •ê¸° ìŠ¤í„°ë””ë¶€í„° ì‹¬í¬ì§€ì—„, ì›Œí¬ìƒµê¹Œì§€ â€” TORCHì—ì„œëŠ” í•­ìƒ ë°°ì›€ì´ ì´ì–´ì§‘ë‹ˆë‹¤.</p>
    <div class="breadcrumb"><a href="../index.html">Home</a><span>/</span><span>Activity</span></div>
  </div>
</div>

<!-- Programs -->
<section class="section">
  <div class="container">
    <div class="section-header">
      <span class="eyebrow">Programs</span>
      <h2 data-i18n="activity.programs.h2">ì£¼ìš” í™œë™ í”„ë¡œê·¸ë¨</h2>
      <div class="divider"></div>
    </div>
    <div id="cards-grid" class="activity-card-news">
      <!-- Loaded from API -->
    </div>
    <!-- Fallback static cards (hidden when API loaded) -->
    <div id="cards-fallback" class="grid-3" style="display:none">
      <div class="card">
        <div class="card-icon">ğŸ¦·</div>
        <h3 data-i18n="activity.c1.h3">ì •ê¸° ìŠ¤í„°ë””</h3>
        <p data-i18n="activity.c1.p">ê²©ì£¼ ë˜ëŠ” ì›” 1íšŒ ì§„í–‰í•˜ëŠ” ì •ê¸° ìŠ¤í„°ë””. ì„ìƒ ì¼€ì´ìŠ¤ ë°œí‘œ, ë…¼ë¬¸ ë¦¬ë·°, ê¸°ìˆ  ì„¸ë¯¸ë‚˜ ë“± ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.</p>
        <ul style="margin-top:16px;display:flex;flex-direction:column;gap:8px">
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c1.m1">ğŸ“… ê²©ì£¼ í† ìš”ì¼</li>
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c1.m2">â± 2â€“3ì‹œê°„</li>
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c1.m3">ğŸ“ ëŒ€ë©´ / ì˜¨ë¼ì¸ ë³‘í–‰</li>
        </ul>
      </div>
      <div class="card">
        <div class="card-icon">ğŸ› ï¸</div>
        <h3 data-i18n="activity.c2.h3">ì‹¤ìŠµ ì›Œí¬ìƒµ</h3>
        <p data-i18n="activity.c2.p">CAD/CAM, ì„¸ë¼ë¯¹, êµí•©, ì„í”Œë€íŠ¸ ë³´ì²  ë“± ì£¼ì œë³„ ì§‘ì¤‘ ì‹¤ìŠµ ì›Œí¬ìƒµì„ ê°œìµœí•©ë‹ˆë‹¤. ì†Œìˆ˜ ì •ì›ìœ¼ë¡œ ë°€ë„ ë†’ê²Œ ì§„í–‰ë©ë‹ˆë‹¤.</p>
        <ul style="margin-top:16px;display:flex;flex-direction:column;gap:8px">
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c2.m1">ğŸ“… ë¶„ê¸°ë³„ 1íšŒ</li>
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c2.m2">â± 4â€“8ì‹œê°„</li>
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c2.m3">ğŸ“ ì‹¤ìŠµ ê³µê°„ ëŒ€ë©´</li>
        </ul>
      </div>
      <div class="card">
        <div class="card-icon">ğŸ¤</div>
        <h3 data-i18n="activity.c3.h3">ì—°ë¡€ ì‹¬í¬ì§€ì—„</h3>
        <p data-i18n="activity.c3.p">ì—° 1íšŒ ê°œìµœí•˜ëŠ” TORCH ì‹¬í¬ì§€ì—„. íšŒì› ì—°êµ¬ ë°œí‘œ, ì™¸ë¶€ ì´ˆì²­ ê°•ì—°, í¬ìŠ¤í„° ì„¸ì…˜, ë„¤íŠ¸ì›Œí‚¹ ë¦¬ì…‰ì…˜ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.</p>
        <ul style="margin-top:16px;display:flex;flex-direction:column;gap:8px">
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c3.m1">ğŸ“… ì—° 1íšŒ (5ì›”)</li>
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c3.m2">â± í•˜ë£¨ ì¢…ì¼</li>
          <li style="font-size:.85rem;color:var(--text-muted)" data-i18n="activity.c3.m3">ğŸ“ ëŒ€í˜• ê°•ì˜ì¥</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- Sessions -->
<section class="section section-light">
  <div class="container">
    <div class="section-header">
      <span class="eyebrow">Curriculum</span>
      <h2 data-i18n="activity.sessions.h2">ìŠ¤í„°ë”” ì„¸ì…˜</h2>
      <div class="divider"></div>
    </div>

    <div class="tabs">
      <button class="tab-btn active" data-tab="tab-past" data-i18n="activity.tab.past">ì§€ë‚œ ì„¸ì…˜</button>
      <button class="tab-btn" data-tab="tab-upcoming" data-i18n="activity.tab.upcoming">ì˜ˆì • ì„¸ì…˜</button>
    </div>

    <div id="tab-past" class="tab-pane active">
      <div class="table-wrap">
        <table id="sessions-past-table">
          <thead><tr><th>#</th><th data-i18n="activity.th.date">ë‚ ì§œ</th><th data-i18n="activity.th.topic">ì£¼ì œ</th><th data-i18n="activity.th.presenter">ë°œí‘œì</th><th data-i18n="activity.th.format">í˜•ì‹</th><th data-i18n="activity.th.material">ìë£Œ</th></tr></thead>
          <tbody id="past-tbody">
            <tr><td colspan="6" style="text-align:center;padding:32px;color:var(--text-muted)" data-i18n="common.loading">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div id="tab-upcoming" class="tab-pane">
      <div class="table-wrap">
        <table>
          <thead><tr><th>#</th><th data-i18n="activity.th.date">ë‚ ì§œ</th><th data-i18n="activity.th.topic">ì£¼ì œ</th><th data-i18n="activity.th.format">í˜•ì‹</th><th data-i18n="activity.th.register">ì‹ ì²­</th></tr></thead>
          <tbody id="upcoming-tbody">
            <tr><td colspan="5" style="text-align:center;padding:32px;color:var(--text-muted)" data-i18n="common.loading">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<!-- Fields -->
<section class="section">
  <div class="container">
    <div class="section-header">
      <span class="eyebrow">Fields</span>
      <h2 data-i18n="activity.fields.h2">ë‹¤ë£¨ëŠ” ë¶„ì•¼</h2>
      <div class="divider"></div>
    </div>
    <div class="grid-4">
      <div class="card text-center" style="padding:20px"><div style="font-size:2rem;margin-bottom:10px">ğŸª¥</div><h4 data-i18n="activity.f1.h4">ê³ ì •ì„± ë³´ì² </h4><p style="font-size:.82rem" data-i18n="activity.f1.p">í¬ë¼ìš´, ë¸Œë¦¿ì§€, ì¸ë ˆì´ ë“± ê³ ì •ì„± ë³´ì² ë¬¼ ì œì‘ ì „ë°˜</p></div>
      <div class="card text-center" style="padding:20px"><div style="font-size:2rem;margin-bottom:10px">ğŸ˜</div><h4 data-i18n="activity.f2.h4">ê°€ì² ì„± ë³´ì² </h4><p style="font-size:.82rem" data-i18n="activity.f2.p">ì´ì˜ì¹˜, êµ­ì†Œì˜ì¹˜ ë“± ê°€ì² ì„± ë³´ì² ë¬¼ ì œì‘ ë° êµí•©</p></div>
      <div class="card text-center" style="padding:20px"><div style="font-size:2rem;margin-bottom:10px">ğŸ”©</div><h4 data-i18n="activity.f3.h4">ì„í”Œë€íŠ¸ ë³´ì² </h4><p style="font-size:.82rem" data-i18n="activity.f3.p">ì„í”Œë€íŠ¸ ìƒë¶€ ë³´ì² ë¬¼, Full Arch ì¼€ì´ìŠ¤ ë“±</p></div>
      <div class="card text-center" style="padding:20px"><div style="font-size:2rem;margin-bottom:10px">âœ¨</div><h4 data-i18n="activity.f4.h4">ì‹¬ë¯¸ ì¹˜ê³¼ê¸°ê³µ</h4><p style="font-size:.82rem" data-i18n="activity.f4.p">ì „ì¹˜ë¶€ ì„¸ë¼ë¯¹, ë¼ë¯¸ë„¤ì´íŠ¸, ìƒ‰ì¡° ì¬í˜„ ê¸°ë²•</p></div>
      <div class="card text-center" style="padding:20px"><div style="font-size:2rem;margin-bottom:10px">ğŸ’»</div><h4 data-i18n="activity.f5.h4">CAD/CAM</h4><p style="font-size:.82rem" data-i18n="activity.f5.p">ë””ì§€í„¸ ë³´ì²  ì„¤ê³„, ë°€ë§, êµ¬ê°• ìŠ¤ìºë„ˆ í™œìš©</p></div>
      <div class="card text-center" style="padding:20px"><div style="font-size:2rem;margin-bottom:10px">ğŸ–¨ï¸</div><h4 data-i18n="activity.f6.h4">3D í”„ë¦°íŒ…</h4><p style="font-size:.82rem" data-i18n="activity.f6.p">ë ˆì§„ í”„ë¦°íŒ…, ì„œì§€ì»¬ ê°€ì´ë“œ, ì„ì‹œ ë³´ì²  ì œì‘</p></div>
      <div class="card text-center" style="padding:20px"><div style="font-size:2rem;margin-bottom:10px">ğŸ¦´</div><h4 data-i18n="activity.f7.h4">êµì • ì¥ì¹˜</h4><p style="font-size:.82rem" data-i18n="activity.f7.p">êµì •ìš© ë ˆí…Œì´ë„ˆ, ì•…ê³¨ ì¥ì¹˜, íˆ¬ëª… êµì • ì¥ì¹˜</p></div>
    </div>
  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-brand"><a href="../index.html" class="nav-logo"><div class="logo-icon">ğŸ”¥</div>TORCH</a><p style="margin-top:12px" data-i18n-html="footer.brand.p">Korea Young Dental Technician Study<br>ê¸°ìˆ  Â· ê¸°íšŒ Â· ë³´ì™„ Â· ë„ì „ Â· í¬ë§</p></div>
      <div class="footer-col"><h4>Pages</h4><ul><li><a href="../about.html">About</a></li><li><a href="index.html">Activity</a></li><li><a href="../sponsor.html">Sponsor</a></li></ul></div>
      <div class="footer-col"><h4>Registration</h4><ul><li><a href="../registration/study.html">Study Group</a></li><li><a href="../registration/symposium.html">Symposium</a></li><li><a href="../registration/workshop.html">Workshop</a></li></ul></div>
      <div class="footer-col"><h4>Community</h4><ul><li><a href="../news/index.html">News</a></li><li><a href="../contact.html">Contact</a></li></ul></div>
    </div>
    <div class="footer-bottom"><span data-i18n="footer.copyright">Â© 2025 TORCH â€“ Korea Young Dental Technician Study. All rights reserved.</span></div>
  </div>
</footer>

<script src="../js/theme.js"></script>
<script src="../js/i18n.js"></script>
<script>
/* Tab switching */
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});

/* Load activity data from API */
(async () => {
  try {
    const res = await fetch('/api/activity');
    if (!res.ok) throw new Error();
    const { cards, sessions } = await res.json();

    // Cards
    const grid = document.getElementById('cards-grid');
    if (cards && cards.length) {
      grid.innerHTML = cards.map(c => `
        <div class="act-card">
          <div class="act-card-img">
            ${c.image ? `<img src="${esc(c.image)}" alt="${esc(c.title)}">` : 'ğŸ”¥'}
          </div>
          <div class="act-card-body">
            ${c.date ? `<div class="act-card-date">ğŸ“… ${esc(c.date)}</div>` : ''}
            <div class="act-card-title">${esc(c.title)}</div>
            <div class="act-card-desc">${esc(c.description)}</div>
          </div>
        </div>
      `).join('');
    } else {
      grid.style.display = 'none';
      document.getElementById('cards-fallback').style.display = '';
    }

    // Sessions
    const today = new Date().toISOString().slice(0,10);
    const past = (sessions || []).filter(s => s.session_date <= today);
    const upcoming = (sessions || []).filter(s => s.session_date > today);

    const pastTbody = document.getElementById('past-tbody');
    if (past.length) {
      pastTbody.innerHTML = past.map((s, i) => `
        <tr>
          <td>${i + 1}</td>
          <td>${esc(s.session_date)}</td>
          <td>${esc(s.title)}</td>
          <td>${esc(s.presenter)}</td>
          <td>${esc(s.format)}</td>
          <td>${s.has_material ? '<span class="badge badge-success">ìë£Œ ìˆìŒ</span>' : '<span class="badge badge-warning">ì—†ìŒ</span>'}</td>
        </tr>
      `).join('');
    } else {
      pastTbody.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:32px;color:var(--text-muted)">ì§€ë‚œ ì„¸ì…˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
    }

    const upcomingTbody = document.getElementById('upcoming-tbody');
    if (upcoming.length) {
      upcomingTbody.innerHTML = upcoming.map((s, i) => `
        <tr>
          <td>${i + 1}</td>
          <td>${esc(s.session_date)}</td>
          <td>${esc(s.title)}</td>
          <td>${esc(s.format)}</td>
          <td><a href="../registration/study.html" class="btn btn-primary btn-sm">ì‹ ì²­</a></td>
        </tr>
      `).join('');
    } else {
      upcomingTbody.innerHTML = '<tr><td colspan="5" style="text-align:center;padding:32px;color:var(--text-muted)">ì˜ˆì •ëœ ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
    }
  } catch {
    document.getElementById('cards-grid').style.display = 'none';
    document.getElementById('cards-fallback').style.display = '';
    document.getElementById('past-tbody').innerHTML = '<tr><td colspan="6" style="text-align:center;padding:32px;color:var(--text-muted)">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
    document.getElementById('upcoming-tbody').innerHTML = '<tr><td colspan="5" style="text-align:center;padding:32px;color:var(--text-muted)">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
  }
})();

function esc(str) {
  return (str || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}
</script>
</body>
</html>
