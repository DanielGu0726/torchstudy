<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Workshop â€“ TORCH</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .ws-hero-img { width: 100%; max-height: 340px; object-fit: cover; border-radius: var(--radius-lg); margin-bottom: 32px; }
    .ws-meta-row { display: flex; gap: 24px; flex-wrap: wrap; margin-bottom: 28px; }
    .ws-meta-item { display: flex; align-items: center; gap: 8px; font-size: .9rem; }
  </style>
</head>
<body>
<nav class="navbar">
  <div class="nav-inner">
    <a href="../index.html" class="nav-logo"><div class="logo-icon">ğŸ”¥</div>TORCH</a>
    <div class="nav-links">
      <div class="nav-item"><a href="../index.html" class="nav-link">Home</a></div>
      <div class="nav-item"><a href="../about.html" class="nav-link">About</a></div>
      <div class="nav-item"><a href="../activity/index.html" class="nav-link">Activity</a></div>
      <div class="nav-item"><span class="nav-link active">Registration <svg viewBox="0 0 10 6" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M1 1l4 4 4-4"/></svg></span><div class="dropdown"><a href="study.html">Study Group</a><a href="symposium.html">Symposium</a><a href="workshop.html">Workshop</a></div></div>
      <div class="nav-item"><a href="../sponsor.html" class="nav-link">Sponsor</a></div>
      <div class="nav-item"><a href="../members/members.html" class="nav-link">Members</a></div>
      <div class="nav-item"><a href="../news/index.html" class="nav-link">News</a></div>
      <div class="nav-item"><a href="../contact.html" class="nav-link">Contact</a></div>
    </div>
    <div class="lang-toggle">
      <button class="lang-btn active" id="btn-ko" onclick="I18n.setLang('ko')">KOR</button>
      <button class="lang-btn" id="btn-en" onclick="I18n.setLang('en')">ENG</button>
    </div>
    <div class="hamburger"><span></span><span></span><span></span></div>
  </div>
</nav>
<div class="mobile-menu">
  <a href="../index.html" class="mobile-link">Home</a>
  <a href="../about.html" class="mobile-link">About</a>
  <a href="../activity/index.html" class="mobile-link">Activity</a>
  <div class="mobile-dropdown">
    <div class="mobile-dropdown-toggle">
      <span>Registration</span>
      <svg viewBox="0 0 10 6" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M1 1l4 4 4-4"/></svg>
    </div>
    <div class="mobile-submenu">
      <a href="study.html" class="mobile-link" data-i18n="mobile.study">Study ì‹ ì²­</a>
      <a href="symposium.html" class="mobile-link">Symposium</a>
      <a href="workshop.html" class="mobile-link" data-i18n="mobile.workshop">Workshop ì‹ ì²­</a>
    </div>
  </div>
  <a href="../sponsor.html" class="mobile-link">Sponsor</a>
  <a href="../members/members.html" class="mobile-link" data-i18n="mobile.members">Members ì†Œê°œ</a>
  <a href="../news/index.html" class="mobile-link">News</a>
  <a href="../contact.html" class="mobile-link">Contact</a>
</div>

<div class="page-header">
  <div class="container">
    <span class="eyebrow">Hands-on</span>
    <h1>Workshop</h1>
    <p data-i18n="reg.ws.header.p">íŠ¹ì • ë¶„ì•¼ë¥¼ ì§‘ì¤‘ì ìœ¼ë¡œ í•™ìŠµí•˜ëŠ” ì‹¤ìŠµ ì¤‘ì‹¬ ì›Œí¬ìƒµì— ì°¸ê°€í•˜ì„¸ìš”.</p>
    <div class="breadcrumb"><a href="../index.html">Home</a><span>/</span><a href="study.html">Registration</a><span>/</span><span>Workshop</span></div>
  </div>
</div>

<!-- Active Workshop Content -->
<section id="ws-active-section" class="section section-light" style="display:none">
  <div class="container">
    <div id="ws-photo-wrap"></div>

    <div style="display:grid;grid-template-columns:1fr 1.5fr;gap:40px;align-items:start">
      <div>
        <div class="card">
          <h3 id="ws-title" style="margin-bottom:16px"></h3>
          <div class="ws-meta-row">
            <div class="ws-meta-item" id="ws-date-wrap" style="display:none">ğŸ“… <span id="ws-date"></span></div>
            <div class="ws-meta-item" id="ws-loc-wrap" style="display:none">ğŸ“ <span id="ws-location"></span></div>
            <div class="ws-meta-item" id="ws-cap-wrap" style="display:none">ğŸ‘¥ <span id="ws-capacity"></span><span data-i18n="reg.ws.cap.suffix">ëª…</span></div>
          </div>
          <div id="ws-topic-wrap" style="display:none;margin-bottom:16px">
            <strong data-i18n="reg.ws.topic.label">ì£¼ì œ</strong>
            <p id="ws-topic" style="font-size:.9rem;margin-top:4px;color:var(--text-muted)"></p>
          </div>
          <div id="ws-description" style="font-size:.9rem;line-height:1.7;color:var(--text-muted)"></div>
        </div>
      </div>

      <div class="form-card" style="max-width:100%">
        <h3 style="margin-bottom:6px" data-i18n="reg.ws.form.h3">Workshop ì‹ ì²­ì„œ</h3>
        <p style="font-size:.88rem;margin-bottom:24px" data-i18n="reg.ws.form.p">ì•„ë˜ ì–‘ì‹ì„ ì‘ì„±í•˜ì—¬ ì‹ ì²­í•´ ì£¼ì„¸ìš”.</p>

        <div id="form-alert" class="alert"><span class="alert-msg"></span></div>

        <form id="workshop-form">
          <div class="form-row">
            <div class="form-group">
              <label class="required" data-i18n="form.name">ì´ë¦„</label>
              <input class="form-control" name="name" data-i18n-placeholder="form.name.ph" placeholder="í™ê¸¸ë™" required>
              <div class="error-msg"></div>
            </div>
            <div class="form-group">
              <label class="required" data-i18n="form.phone">ì—°ë½ì²˜</label>
              <input class="form-control" name="phone" data-validate="phone" data-i18n-placeholder="form.phone.ph" placeholder="010-0000-0000" required>
              <div class="error-msg"></div>
            </div>
          </div>
          <div class="form-group">
            <label class="required" data-i18n="form.affiliation">ì†Œì†</label>
            <input class="form-control" name="affiliation" data-i18n-placeholder="form.affiliation.ph" placeholder="â—‹â—‹ì¹˜ê³¼ê¸°ê³µì†Œ / â—‹â—‹ëŒ€í•™êµ" required>
            <div class="error-msg"></div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="required" data-i18n="form.ws.experience">ê²½ë ¥</label>
              <select class="form-control" name="experience" required>
                <option value="">ì„ íƒâ€¦</option>
                <option>í•™ìƒ (ì¬í•™ ì¤‘)</option>
                <option>1â€“3ë…„ì°¨</option>
                <option>4â€“10ë…„ì°¨</option>
                <option>10ë…„ ì´ìƒ</option>
              </select>
              <div class="error-msg"></div>
            </div>
          </div>
          <div class="form-group">
            <label data-i18n="form.goals">ê¸°ëŒ€í•˜ëŠ” ê²ƒ (ì„ íƒ)</label>
            <textarea class="form-control" name="goals" data-i18n-placeholder="form.goals.ph" placeholder="ë°°ìš°ê³  ì‹¶ì€ ë‚´ìš©ì´ë‚˜ ê¶ê¸ˆí•œ ì ì„ ì ì–´ì£¼ì„¸ìš”."></textarea>
          </div>
          <div class="form-group">
            <label class="check-item"><input type="checkbox" required> <span data-i18n="form.ws.consent">ì°¸ê°€ ì‹ ì²­ ë‚´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤</span></label>
          </div>
          <button type="submit" class="btn btn-primary btn-block btn-lg" data-i18n="reg.ws.submit">Workshop ì‹ ì²­</button>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Closed -->
<section id="ws-closed-section" class="section section-light" style="display:none">
  <div class="container" style="text-align:center;padding:80px 16px">
    <div style="font-size:3rem;margin-bottom:20px">ğŸ”’</div>
    <h2 style="margin-bottom:16px" data-i18n="reg.ws.closed.h2">í˜„ì¬ ëª¨ì§‘ ì¤‘ì¸ ì›Œí¬ìƒµì´ ì—†ìŠµë‹ˆë‹¤</h2>
    <p style="max-width:480px;margin:0 auto 32px;color:var(--text-muted);font-size:1.05rem" data-i18n="reg.ws.closed.p">ìƒˆë¡œìš´ ì›Œí¬ìƒµ ì¼ì •ì€ ì¸ìŠ¤íƒ€ê·¸ë¨ê³¼ ê³µì‹ ì±„ë„ì„ í†µí•´ ê³µì§€ë©ë‹ˆë‹¤.</p>
    <div style="display:flex;gap:16px;justify-content:center;flex-wrap:wrap">
      <a href="https://www.instagram.com/t_o_r_c_h_study/" target="_blank" class="btn btn-primary" data-i18n="reg.study.closed.btn1">ğŸ“· Instagram íŒ”ë¡œìš°</a>
      <a href="../contact.html" class="btn btn-dark" data-i18n="common.contact">ë¬¸ì˜í•˜ê¸°</a>
    </div>
  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-brand"><a href="../index.html" class="nav-logo"><div class="logo-icon">ğŸ”¥</div>TORCH</a><p style="margin-top:12px" data-i18n-html="footer.brand.p">Korea Young Dental Technician Study<br>ê¸°ìˆ  Â· ê¸°íšŒ Â· ë³´ì™„ Â· ë„ì „ Â· í¬ë§</p></div>
      <div class="footer-col"><h4>Pages</h4><ul><li><a href="../about.html">About</a></li><li><a href="../activity/index.html">Activity</a></li><li><a href="../sponsor.html">Sponsor</a></li></ul></div>
      <div class="footer-col"><h4>Registration</h4><ul><li><a href="study.html">Study Group</a></li><li><a href="symposium.html">Symposium</a></li><li><a href="workshop.html">Workshop</a></li></ul></div>
      <div class="footer-col"><h4>Community</h4><ul><li><a href="../news/index.html">News</a></li><li><a href="../contact.html">Contact</a></li></ul></div>
    </div>
    <div class="footer-bottom"><span data-i18n="footer.copyright">Â© 2018 TORCH â€“ Korea Young Dental Technician Study. All rights reserved.</span></div>
  </div>
</footer>

<script src="../js/theme.js"></script>
<script src="../js/registration.js"></script>
<script>
(async () => {
  let wsConfig = { active: false };
  try {
    const res = await fetch('/api/workshop');
    if (res.ok) wsConfig = await res.json();
  } catch {}

  if (wsConfig.active) {
    document.getElementById('ws-active-section').style.display = '';

    // Fill in workshop info
    document.getElementById('ws-title').textContent = wsConfig.title || 'Workshop';
    document.getElementById('ws-description').textContent = wsConfig.description || '';

    if (wsConfig.photo) {
      document.getElementById('ws-photo-wrap').innerHTML =
        `<img src="${wsConfig.photo}" alt="Workshop" class="ws-hero-img">`;
    }
    if (wsConfig.date) {
      document.getElementById('ws-date').textContent = wsConfig.date;
      document.getElementById('ws-date-wrap').style.display = 'flex';
    }
    if (wsConfig.location) {
      document.getElementById('ws-location').textContent = wsConfig.location;
      document.getElementById('ws-loc-wrap').style.display = 'flex';
    }
    if (wsConfig.capacity) {
      document.getElementById('ws-capacity').textContent = wsConfig.capacity;
      document.getElementById('ws-cap-wrap').style.display = 'flex';
    }
    if (wsConfig.topic) {
      document.getElementById('ws-topic').textContent = wsConfig.topic;
      document.getElementById('ws-topic-wrap').style.display = '';
    }

    // Attach form
    document.getElementById('workshop-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!Registration.validateForm(this)) {
        Registration.showAlert('danger', 'í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      const data = Object.fromEntries(new FormData(this).entries());
      try {
        const res = await fetch('/api/registrations', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ type: 'workshop', ...data })
        });
        if (res.ok) {
          this.reset();
          Registration.showAlert('success', 'âœ… ì‹ ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. í™•ì¸ í›„ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.');
        } else {
          const err = await res.json().catch(() => ({}));
          Registration.showAlert('danger', err.error || 'ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
      } catch {
        Registration.showAlert('danger', 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });
  } else {
    document.getElementById('ws-closed-section').style.display = '';
  }
})();
</script>
<script src="../js/i18n.js"></script>
<script src="../js/menu.js"></script>
</body>
</html>
