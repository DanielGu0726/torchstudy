<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>관리자 대시보드 – TORCH</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
<nav class="navbar">
  <div class="nav-inner">
    <a href="../index.html" class="nav-logo"><div class="logo-icon">🔥</div>TORCH</a>
    <div class="nav-links">
      <div class="nav-item"><a href="../index.html" class="nav-link">Home</a></div>
      <div class="nav-item"><a href="profile.html" class="nav-link">내 프로필</a></div>
      <div class="nav-item"><a href="admin.html" class="nav-link active">Admin</a></div>
    </div>
    <div class="nav-cta" style="display:flex;gap:8px;align-items:center">
      <span style="font-size:.85rem;color:rgba(255,255,255,.6)" data-auth="name"></span>
      <a href="#" class="btn btn-outline btn-sm" data-auth="logout">로그아웃</a>
    </div>
    <div class="hamburger"><span></span><span></span><span></span></div>
  </div>
</nav>
<div class="mobile-menu">
  <a href="../index.html" class="mobile-link">Home</a>
  <a href="profile.html" class="mobile-link">내 프로필</a>
  <a href="#" class="mobile-link" data-auth="logout">로그아웃</a>
</div>

<div class="page-header">
  <div class="container">
    <span class="eyebrow">Administration</span>
    <h1>관리자 대시보드</h1>
    <p>신청 현황, 회원 정보, 사이트 콘텐츠를 관리합니다.</p>
  </div>
</div>

<section class="section section-light">
  <div class="container">
    <!-- KPI Row -->
    <div class="kpi-grid" style="margin-bottom:24px">
      <div class="kpi-card">
        <div class="kpi-label">총 신청 건수</div>
        <div class="kpi-value" id="kpi-total">—</div>
        <div class="kpi-delta">↑ 이번 달 12% 증가</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">스터디 그룹</div>
        <div class="kpi-value" id="kpi-study">—</div>
        <div class="kpi-delta">↑ 이번 주 8명 신규</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">심포지엄</div>
        <div class="kpi-value" id="kpi-symposium">—</div>
        <div class="kpi-delta">↑ 이번 주 5명 신규</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">워크샵</div>
        <div class="kpi-value" id="kpi-workshop">—</div>
        <div class="kpi-delta">→ 안정적</div>
      </div>
    </div>

    <!-- Dashboard Grid -->
    <div class="dashboard-grid">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-title">대시보드</div>
        <div class="sidebar-link active" data-panel="panel-overview"><span>📊</span> 개요</div>
        <div class="sidebar-title" style="margin-top:12px">신청 관리</div>
        <div class="sidebar-link" data-panel="panel-study"><span>📚</span> 스터디 그룹</div>
        <div class="sidebar-link" data-panel="panel-symposium"><span>🎤</span> 심포지엄</div>
        <div class="sidebar-link" data-panel="panel-workshop"><span>🛠</span> 워크샵</div>
        <div class="sidebar-title" style="margin-top:12px">콘텐츠</div>
        <div class="sidebar-link" data-panel="panel-news"><span>📰</span> 뉴스</div>
        <div class="sidebar-link" data-panel="panel-settings"><span>⚙️</span> 설정</div>
      </div>

      <!-- Main -->
      <div class="main-panel">

        <!-- Overview -->
        <div id="panel-overview" class="admin-panel">
          <div class="panel">
            <div class="panel-header"><h3>최근 활동</h3><span class="badge badge-info">실시간</span></div>
            <div class="table-wrap">
              <table>
                <thead><tr><th>유형</th><th>이름</th><th>날짜</th><th>상태</th></tr></thead>
                <tbody>
                  <tr><td><span class="badge badge-info">스터디</span></td><td>김민지</td><td>2025-02-20</td><td><span class="badge badge-warning">검토 중</span></td></tr>
                  <tr><td><span class="badge badge-info">심포지엄</span></td><td>박성호</td><td>2025-02-19</td><td><span class="badge badge-success">승인됨</span></td></tr>
                  <tr><td><span class="badge badge-info">워크샵</span></td><td>이수진</td><td>2025-02-18</td><td><span class="badge badge-success">승인됨</span></td></tr>
                  <tr><td><span class="badge badge-info">스터디</span></td><td>조현우</td><td>2025-02-18</td><td><span class="badge badge-warning">검토 중</span></td></tr>
                  <tr><td><span class="badge badge-info">워크샵</span></td><td>정유나</td><td>2025-02-17</td><td><span class="badge badge-danger">거절됨</span></td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="panel">
            <div class="panel-header"><h3>빠른 실행</h3></div>
            <div style="display:flex;gap:12px;flex-wrap:wrap">
              <button class="btn btn-primary btn-sm" onclick="alert('CSV 내보내기 (데모)')">📥 CSV 내보내기</button>
              <button class="btn btn-dark btn-sm" onclick="alert('뉴스레터 발송 (데모)')">✉ 뉴스레터 발송</button>
              <button class="btn btn-dark btn-sm" onclick="alert('백업 (데모)')">💾 데이터 백업</button>
            </div>
          </div>
        </div>

        <!-- Study -->
        <div id="panel-study" class="admin-panel" style="display:none">
          <div class="panel">
            <div class="panel-header">
              <h3>스터디 그룹 신청 목록</h3>
              <input class="form-control table-search" style="width:200px;font-size:.85rem;padding:7px 12px" placeholder="검색…" data-table="table-study">
            </div>
            <div class="table-wrap">
              <table id="table-study">
                <thead><tr><th>#</th><th>이름</th><th>이메일</th><th>소속</th><th>날짜</th><th>상태</th><th>관리</th></tr></thead>
                <tbody><tr><td colspan="7" style="text-align:center;padding:32px;color:var(--text-muted)">불러오는 중…</td></tr></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Symposium -->
        <div id="panel-symposium" class="admin-panel" style="display:none">
          <div class="panel">
            <div class="panel-header">
              <h3>심포지엄 신청 목록</h3>
              <input class="form-control table-search" style="width:200px;font-size:.85rem;padding:7px 12px" placeholder="검색…" data-table="table-symposium">
            </div>
            <div class="table-wrap">
              <table id="table-symposium">
                <thead><tr><th>#</th><th>이름</th><th>이메일</th><th>소속</th><th>날짜</th><th>상태</th><th>관리</th></tr></thead>
                <tbody><tr><td colspan="7" style="text-align:center;padding:32px;color:var(--text-muted)">불러오는 중…</td></tr></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Workshop -->
        <div id="panel-workshop" class="admin-panel" style="display:none">
          <div class="panel">
            <div class="panel-header">
              <h3>워크샵 신청 목록</h3>
              <input class="form-control table-search" style="width:200px;font-size:.85rem;padding:7px 12px" placeholder="검색…" data-table="table-workshop">
            </div>
            <div class="table-wrap">
              <table id="table-workshop">
                <thead><tr><th>#</th><th>이름</th><th>이메일</th><th>워크샵</th><th>날짜</th><th>상태</th><th>관리</th></tr></thead>
                <tbody><tr><td colspan="7" style="text-align:center;padding:32px;color:var(--text-muted)">불러오는 중…</td></tr></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- News -->
        <div id="panel-news" class="admin-panel" style="display:none">
          <div class="panel">
            <div class="panel-header"><h3>뉴스 관리</h3><button class="btn btn-primary btn-sm" onclick="alert('게시물 추가 (데모)')">+ 게시물 추가</button></div>
            <div class="table-wrap">
              <table>
                <thead><tr><th>#</th><th>제목</th><th>카테고리</th><th>날짜</th><th>상태</th><th>관리</th></tr></thead>
                <tbody>
                  <tr><td>1</td><td>TORCH Symposium 2025 개최 확정</td><td>행사</td><td>2025-02-15</td><td><span class="badge badge-success">게시됨</span></td><td><button class="btn btn-sm btn-dark">수정</button></td></tr>
                  <tr><td>2</td><td>CAD/CAM 실습 워크샵 모집 시작</td><td>워크샵</td><td>2025-02-01</td><td><span class="badge badge-success">게시됨</span></td><td><button class="btn btn-sm btn-dark">수정</button></td></tr>
                  <tr><td>3</td><td>2025년 상반기 스터디 일정 공개</td><td>공지</td><td>2025-01-20</td><td><span class="badge badge-warning">초안</span></td><td><button class="btn btn-sm btn-dark">수정</button></td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Settings -->
        <div id="panel-settings" class="admin-panel" style="display:none">
          <div class="panel">
            <div class="panel-header"><h3>사이트 설정</h3></div>
            <div class="form-group"><label>사이트 이름</label><input class="form-control" value="TORCH – Korea Young Dental Technician Study"></div>
            <div class="form-group"><label>연락처 이메일</label><input class="form-control" value="contact@torchstudy.kr" type="email"></div>

            <!-- Registration Open/Close Toggle -->
            <div class="form-group">
              <label style="margin-bottom:10px;display:block;font-weight:600">신청(Registration) 활성화</label>
              <div style="display:flex;align-items:center;gap:16px">
                <label style="position:relative;display:inline-block;width:52px;height:28px;cursor:pointer">
                  <input type="checkbox" id="reg-toggle" style="opacity:0;width:0;height:0">
                  <span id="reg-toggle-track" style="position:absolute;inset:0;border-radius:14px;background:#ccc;transition:background .3s"></span>
                  <span id="reg-toggle-knob" style="position:absolute;top:4px;left:4px;width:20px;height:20px;background:#fff;border-radius:50%;box-shadow:0 1px 4px rgba(0,0,0,.3);transition:transform .3s"></span>
                </label>
                <span id="reg-toggle-label" style="font-size:.9rem;font-weight:500"></span>
              </div>
              <p style="font-size:.82rem;color:var(--text-muted);margin-top:6px">비활성화 시 Registration 페이지에 "현재는 모집 기간이 아닙니다" 안내가 표시됩니다.</p>
            </div>

            <div class="form-group"><label>스터디 최대 정원</label><input class="form-control" type="number" value="30"></div>
            <button class="btn btn-primary" onclick="alert('설정이 저장되었습니다 (데모)')">저장하기</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="footer-bottom" style="border-top:1px solid rgba(255,255,255,.08);padding-top:20px"><span>© 2025 TORCH – Korea Young Dental Technician Study. All rights reserved.</span></div>
  </div>
</footer>
<script src="../js/auth.js"></script>
<script src="../js/theme.js"></script>
<script src="../js/registration.js"></script>
<script src="../js/admin.js"></script>
<script>
/* ── Registration open/close toggle ── */
(function() {
  const toggle = document.getElementById('reg-toggle');
  const track  = document.getElementById('reg-toggle-track');
  const knob   = document.getElementById('reg-toggle-knob');
  const lbl    = document.getElementById('reg-toggle-label');
  if (!toggle) return;

  function setUI(open) {
    toggle.checked = open;
    track.style.background = open ? 'var(--primary)' : '#ccc';
    knob.style.transform   = open ? 'translateX(24px)' : 'translateX(0)';
    lbl.textContent        = open ? '✅ 신청 활성화 (모집 중)' : '🔒 신청 비활성화 (모집 종료)';
    lbl.style.color        = open ? 'var(--primary)' : 'var(--text-muted)';
  }

  // init from localStorage
  setUI(localStorage.getItem('ts_reg_open') === 'true');

  toggle.addEventListener('change', function() {
    const open = this.checked;
    localStorage.setItem('ts_reg_open', open ? 'true' : 'false');
    setUI(open);
  });
})();
</script>
</body>
</html>
